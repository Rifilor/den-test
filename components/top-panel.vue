<template>
    <header class="header">
        <svg class="header__logo"width="156" height="50" viewBox="0 0 156 50" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M0 25C0 50 0 50 22.5 50C45 50 45 50 45 25C45 0 45 0 22.5 0C0 0 0 0 0 25Z" fill="#E8F4FC"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M0 25C0 50 0 50 22.5 50C45 50 45 50 45 25C45 0 45 0 22.5 0C0 0 0 0 0 25ZM22 27.5C22 36.905 21.649 37.303 16.25 34.011C12.269 31.584 12.261 31.433 16.017 29.491C18.539 28.187 18.867 27.62 18.017 26.031C16.629 23.439 16.734 22.409 18.571 20.571C21.418 17.725 22 18.902 22 27.5Z" fill="#CDDBE9"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M0 25C0 50 0 50 22.5 50C45 50 45 50 45 25C45 0 45 0 22.5 0C0 0 0 0 0 25ZM24.521 20.664C25.64 21.783 26 23.252 25.62 25.152C25.136 27.571 25.51 28.212 28.227 29.617C31.4 31.258 31.4 31.258 29.073 33.142C24.573 36.786 19.421 36.781 14.911 33.129C12.569 31.233 12.569 31.233 15.868 29.227C17.811 28.045 18.721 26.946 18.083 26.551C17.487 26.183 17 24.874 17 23.641C17 19.234 21.364 17.507 24.521 20.664Z" fill="#B9D8AC"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M0 25C0 50 0 50 22.5 50C45 50 45 50 45 25C45 0 45 0 22.5 0C0 0 0 0 0 25ZM25.35 21.267C27.069 23.569 27.141 24.127 25.911 25.616C24.831 26.925 24.79 27.423 25.737 27.741C26.417 27.97 27.976 28.97 29.202 29.963C33.965 33.819 20.495 38.137 15.223 34.443C12.251 32.362 12.418 31.325 16.083 29.096C17.913 27.983 18.726 26.949 18.083 26.551C16.207 25.392 16.896 21.186 19.231 19.55C21.958 17.641 22.824 17.884 25.35 21.267Z" fill="#75AB40"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M0 25C0 50 0 50 22.5 50C45 50 45 50 45 25C45 0 45 0 22.5 0C0 0 0 0 0 25ZM23.279 5.04C22.986 6.161 22.523 6.856 22.249 6.583C21.708 6.042 22.664 3 23.375 3C23.616 3 23.573 3.918 23.279 5.04ZM22.5 11C22.16 11.55 21.121 11.968 20.191 11.93C18.812 11.872 18.87 11.701 20.5 11C23.176 9.85 23.211 9.85 22.5 11ZM15.63 14.203C14.051 15.379 12.156 17.727 11.419 19.421C10.528 21.467 10.065 21.879 10.039 20.65C10 18.806 16.035 11.972 17.65 12.032C18.117 12.049 17.208 13.026 15.63 14.203ZM25.341 21.253C26.936 23.39 27.127 24.273 26.197 25.203C24.403 26.997 24.706 27.636 28 29C29.65 29.683 31 30.653 31 31.155C31 32.919 23.623 36.439 20.548 36.143C15.49 35.655 7.485 29.182 9.476 27.19C9.764 26.902 10.007 27.079 10.015 27.583C10.066 30.63 11.764 31.13 15.416 29.173C17.467 28.074 18.645 26.898 18.058 26.536C15.294 24.827 18.584 17.572 21.833 18.213C22.633 18.371 24.212 19.739 25.341 21.253ZM9.667 24.667C9.3 25.033 9 24.733 9 24C9 23.267 9.3 22.967 9.667 23.333C10.033 23.7 10.033 24.3 9.667 24.667ZM21.662 45.25C21.385 45.938 21.158 45.375 21.158 44C21.158 42.625 21.385 42.063 21.662 42.75C21.94 43.438 21.94 44.563 21.662 45.25Z" fill="#7CB342"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M0 25C0 50 0 50 22.5 50C45 50 45 50 45 25C45 0 45 0 22.5 0C0 0 0 0 0 25ZM22.9 5.857C22.352 7.428 22.038 9.313 22.202 10.047C22.366 10.781 21.6 11.573 20.5 11.807C13.274 13.347 7.416 24.373 10.901 29.874C12.584 32.531 17.998 28.239 17.309 24.793C16.703 21.763 19.11 18 21.655 18C24.332 18 27.24 22.049 26.657 24.964C26.216 27.17 26.593 27.98 28.553 29.028C31.948 30.846 31.661 31.65 26.5 34.767C22.265 37.326 22 37.743 22 41.868C22 46.25 22 46.25 18.754 45.601C8.811 43.612 4.038 35.282 4.016 19.879C4 8.258 4 8.258 8.75 7.586C11.363 7.216 15.075 6.052 17 4.999C22.34 2.077 24.127 2.337 22.9 5.857Z" fill="#689E30"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M0 25C0 50 0 50 22.5 50C45 50 45 50 45 25C45 0 45 0 22.5 0C0 0 0 0 0 25ZM27.037 5.019C29.213 6.129 33.02 7.315 35.497 7.655C40 8.272 40 8.272 39.984 19.886C39.969 30.055 39.689 31.986 37.734 35.405C29.883 49.131 14.117 49.131 6.266 35.405C4.311 31.986 4.031 30.055 4.016 19.879C4 8.258 4 8.258 8.75 7.586C11.363 7.216 15.075 6.052 17 4.999C21.448 2.565 22.231 2.567 27.037 5.019ZM22 14.217C22 15.556 23.164 17.742 24.587 19.076C26.611 20.972 27.066 22.172 26.676 24.587C26.079 28.291 31.175 32.592 32.395 29.413C34.986 22.66 31.044 13.902 24.75 12.427C22.327 11.86 22 12.072 22 14.217Z" fill="white"/>
        <path d="M22 15.5L24 18.5L25 19.5L25.5 20.5L26.5 21.5L27 23V24.5V26.5L28.5 29L30 30H31.5L32.5 29L33 26V23L32.5 20.5L31 17.5L28.5 14.5L26 13L24 12.5H22.5L22 13.5V15.5Z" fill="#5C8E29" stroke="#5C8E29"/>
        <path d="M50.2557 18.3636V30H48.1477V18.3636H50.2557ZM62.1009 18.3636V30H60.2259L54.7429 22.0739H54.6463V30H52.5384V18.3636H54.4247L59.902 26.2955H60.0043V18.3636H62.1009ZM65.9545 18.3636L68.983 27.5227H69.1023L72.125 18.3636H74.4432L70.3409 30H67.7386L63.642 18.3636H65.9545ZM75.9759 30V18.3636H83.544V20.1307H78.0838V23.2898H83.152V25.0568H78.0838V28.233H83.5895V30H75.9759ZM95.2571 18.3636V30H93.3821L87.8991 22.0739H87.8026V30H85.6946V18.3636H87.581L93.0582 26.2955H93.1605V18.3636H95.2571ZM97.0426 20.1307V18.3636H106.327V20.1307H102.73V30H100.639V20.1307H97.0426ZM117.999 24.1818C117.999 25.4356 117.764 26.5095 117.294 27.4034C116.828 28.2936 116.192 28.9754 115.385 29.4489C114.582 29.9223 113.671 30.1591 112.652 30.1591C111.633 30.1591 110.72 29.9223 109.913 29.4489C109.11 28.9716 108.474 28.2879 108.004 27.3977C107.538 26.5038 107.305 25.4318 107.305 24.1818C107.305 22.928 107.538 21.8561 108.004 20.9659C108.474 20.072 109.11 19.3883 109.913 18.9148C110.72 18.4413 111.633 18.2045 112.652 18.2045C113.671 18.2045 114.582 18.4413 115.385 18.9148C116.192 19.3883 116.828 20.072 117.294 20.9659C117.764 21.8561 117.999 22.928 117.999 24.1818ZM115.879 24.1818C115.879 23.2992 115.741 22.5549 115.464 21.9489C115.192 21.339 114.813 20.8788 114.328 20.5682C113.843 20.2538 113.285 20.0966 112.652 20.0966C112.019 20.0966 111.461 20.2538 110.976 20.5682C110.491 20.8788 110.11 21.339 109.834 21.9489C109.561 22.5549 109.425 23.2992 109.425 24.1818C109.425 25.0644 109.561 25.8106 109.834 26.4205C110.11 27.0265 110.491 27.4867 110.976 27.8011C111.461 28.1117 112.019 28.267 112.652 28.267C113.285 28.267 113.843 28.1117 114.328 27.8011C114.813 27.4867 115.192 27.0265 115.464 26.4205C115.741 25.8106 115.879 25.0644 115.879 24.1818ZM119.991 30V18.3636H124.355C125.249 18.3636 125.999 18.5189 126.605 18.8295C127.215 19.1402 127.675 19.5758 127.986 20.1364C128.3 20.6932 128.457 21.3428 128.457 22.0852C128.457 22.8314 128.298 23.4792 127.98 24.0284C127.666 24.5739 127.202 24.9962 126.588 25.2955C125.974 25.5909 125.221 25.7386 124.327 25.7386H121.219V23.9886H124.043C124.565 23.9886 124.993 23.9167 125.327 23.7727C125.66 23.625 125.906 23.411 126.065 23.1307C126.228 22.8466 126.31 22.4981 126.31 22.0852C126.31 21.6723 126.228 21.3201 126.065 21.0284C125.902 20.733 125.654 20.5095 125.321 20.358C124.988 20.2027 124.558 20.125 124.031 20.125H122.099V30H119.991ZM126.003 24.7273L128.884 30H126.531L123.702 24.7273H126.003ZM129.149 18.3636H131.53L134.376 23.5114H134.49L137.337 18.3636H139.717L135.484 25.6591V30H133.382V25.6591L129.149 18.3636Z" fill="#75AB40"/>
        </svg>

        <input class="header__search" :placeholder="$t('search')" v-model="search">
        <div class="header__dop-info block" :key="renderMinute">
            <p class="block__name-day">{{ dateItem().nameDay }}</p>
            <div class="block__wrap">
                <p class="block__date">{{ dateItem().date }}</p>
                <p class="block__time">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#75AB40" height="800px" width="800px" version="1.1" id="Capa_1" viewBox="0 0 490 490" xml:space="preserve">
                    <g>
                        <g>
                            <path d="M245,0C109.5,0,0,109.5,0,245s109.5,245,245,245s245-109.5,245-245S380.5,0,245,0z M245,449.3    c-112.6,0-204.3-91.7-204.3-204.3S132.4,40.7,245,40.7S449.3,132.4,449.3,245S357.6,449.3,245,449.3z"/>
                            <path d="M290.9,224.1h-25v-95.9c0-11.5-9.4-20.9-20.9-20.9s-20.9,9.4-20.9,20.9V245c0,11.5,9.4,20.9,20.9,20.9h45.9    c11.5,0,20.9-9.4,20.9-20.9S302.3,224.1,290.9,224.1z"/>
                        </g>
                    </g>
                    </svg>
                    {{ dateItem().time }}
                </p>
            </div>
        </div>
        <div class="swith-language">
            <NuxtLink @click="changeLocalizationTime('en')" :to="switchLocalePath('en')" class="swith-language__button" :class="{'swith-language__button--active': locale == 'en'}">En</NuxtLink>
            <NuxtLink @click="changeLocalizationTime('ua')" :to="switchLocalePath('ua')" class="swith-language__button" :class="{'swith-language__button--active': locale == 'ua'}">Ua</NuxtLink>
        </div>
  
    </header>
</template>

<script setup lang="ts">
import moment from 'moment'
const switchLocalePath = useSwitchLocalePath();
const {locale} = useI18n()
import { useStore } from '../stores/store';
const store = useStore()
const {search} = storeToRefs(store)

interface dateItemInterface {
    nameDay: string,
    date: string,
    time: string,
}

const dateItem = (): dateItemInterface=> {
    console.log('dateItem');
        return {nameDay: moment().format('dddd'),
        date: moment().format('DD MMM, YYYY'),
        time: moment().format('HH:mm')}
}

const changeLocalizationTime = (lang: string) : void => {
    console.log(''+locale.value == 'ua' ? 'uk' : 'en', moment.locale(), lang);
        locale.value =  lang
        moment.locale(''+locale.value == 'ua' ? 'uk' : 'en')

        renderMinute.value++

}

let renderMinute = ref(0);
console.log(locale );


onMounted(() => {
    setInterval(() => {
    renderMinute.value++
    }, 60000)
    setTimeout(()=> {
        changeLocalizationTime(''+locale.value)
    }, 100)
})

</script>

<style scoped lang="scss">
    .header {
        display: flex;
        align-items: center;
        height: 70px;
        -webkit-box-shadow: 0px 4px 7px 1px rgba(0,0,0,0.10);
        -moz-box-shadow: 0px 4px 7px 1px rgba(0,0,0,0.10);
        box-shadow: 0px 4px 7px 1px rgba(0,0,0,0.10);
        width: 100%;
        padding: 10px 100px;
        box-sizing: border-box;
        background-color: #fff;
        display: flex;
        &__search {
            margin-left: 100px;
            background-image: url(https://uxwing.com/wp-content/themes/uxwing/download/user-interface/search-icon.png);
            background-repeat: no-repeat;
            background-size: 15px 15px;
            background-position: 10px center;
            padding-left: 35px;
            width: 350px;
        }
        &__dop-info {
            margin-left: auto;
        }
    }

    .block {
        color: #626262;
        font-weight: 500;
        &__wrap {
            display: flex;
            margin-top: 10px;
        }
        &__name-day, &__date {
            text-transform: capitalize;
        }
        &__time {
            margin-left: 20px;
            svg {
                width: 12px;
                height: 12px;
            }
        }
    }

    .swith-language {
        top: 12px;
        right: 100px;
        position: absolute;
        &__button {
            color: #626262;
            font-size: 16px;
            line-height: 110%;
            padding: 0 5px;
            font-weight: 600;
            transition: .1s linear;
            &--active {
                font-size: 17px;
                color: #222;
            }
        }
    }
</style>